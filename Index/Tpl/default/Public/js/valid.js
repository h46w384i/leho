pmc_in_script_time_6824=new Date()*1;(function(){var A=window.BB,T=A.getScript,L=A.ObjectH.mix,H=A.StringH,R=H.trim,I=H.tmpl,J=H.dbc2sbc,P=H.byteLen,V=H.evalExp,M=A.DateH.format,S=A.NodeH,F=S.$,G=S.query,E=S.getValue,K=function(Y,X){return Y[X]||Y.getAttribute(X)||Q(Y,X);},N=A.DomU.create,B=A.CustEvent;var U={VERSION:"0.0.1",EVENTS:"hint,blur,pass,fail,beforecheckall,checkall,initall".split(","),REQ_ATTR:"reqMsg",_curReqAttr:"reqMsg"};var Q=function(b,d){var Y=U.CheckRules;if(!Y){return null;}d=d.toLowerCase();b=F(b);var c=[];if(b.id){c.push("#"+b.id);}if(b.name){c.push("@"+b.name);}c=c.concat(b.className.match(/\.[\w\-]+/g)||[],(b.tagName+"").toLowerCase());for(var a=0,X=c.length;a<X;a++){var Z=c[a];if((Z in Y)&&(d in Y[Z])){return Y[Z][d];}}return null;};B.createEvents(U,U.EVENTS);L(U,{hint:function(X){U.fire(new B(X,"hint"));},blur:function(X){U.fire(new B(X,"blur"));},pass:function(X){U.fire(new B(X,"pass"));},fail:function(Z,X,Y){if(Y){U.focusFailEl(Z);}var a=new B(Z,"fail");a.errMsg=X;U.fire(a);},checkAll_stamp:1,isChecking:false,checkAll:function(g,f,X){f=(f!=false);var Z=new B(g,"beforecheckall");Z.opts=X||{};U.fire(Z);U.isChecking=true;var b=g.elements,e=[];for(var c=0,Y;Y=b[c++];){if(!K(Y,"forceVld")&&(Y.disabled||Y.readOnly||!Y.offsetWidth)){continue;}if(!U.check(Y,false,X)){e.push(Y);}}var d=!e.length;var a=new B(g,"checkall");a.result=d;a.failEls=e;U.fire(a);U.isChecking=false;U.checkAll_stamp++;if(!d&&f){window.setTimeout(function(){U.check(e[0],true,X);},10);}return d;},check:function(Y,X,Z){if(!C.required(Y)||K(Y,"datatype")&&!C.datatype(Y)||(Z&&Z.myValidator&&!Z.myValidator(Y))){if(X){U.focusFailEl(Y);U.check(Y,false,Z);}return false;}return true;},renderResult:function(Z,a,X,Y){if(a){U.pass(Z);}else{U.fail(Z,X,Y);}},focusFailEl:function(X){var Y=K(X,"focusEl");Y=Y&&F(Y)||X;try{Y.focus();if(!Y.tagName){return ;}if(A.NodeW&&A.NodeW.shine4Error){A.NodeW.shine4Error(Y);}Y.select();}catch(Z){}},initAll:function(Z){if(!U._isInitialized){U._isInitialized=true;if(document.addEventListener){document.addEventListener("focus",function(c){var b=c.target;if(b&&",INPUT,SELECT,TEXTAREA,OBJECT".indexOf(","+b.tagName)>-1){U.hint(b);}},true);document.addEventListener("blur",function(c){var b=c.target;if(b&&",INPUT,SELECT,TEXTAREA,OBJECT".indexOf(","+b.tagName)>-1){U.blur(b);}},true);}else{document.attachEvent("onfocusin",function(b){U.hint(b.srcElement);});document.attachEvent("onfocusout",function(b){U.blur(b.srcElement);});}}var Y=G(Z,"input");for(var X=0;X<Y.length;X++){U.initEl(Y[X]);}var a=new B(Z,"initall");U.fire(a);},initEl:function(Z){var Y=K(Z,"datatype");if(Y=="d"||Y=="daterange"){var a=Z.nextSibling;if(a&&a.tagName=="IMG"){return ;}var X=D.getCalendarImg().cloneNode(true);X.onclick=function(b){D.getDateFromPopup(Z);};Z.parentNode.insertBefore(X,a);}},resetAll:function(a){var Y=a.elements;for(var X=0,Z;Z=Y[X++];){U.pass(Z);}}});var O=U.Msgs={n_integer:"请输入小于{$0}的正整数。",n_format:'数字输入格式为"{$0}"。',n_upper:"输入值太大，最大允许<strong>{$0}</strong>。",n_lower:"输入值太小，最小允许<strong>{$0}</strong>。",nrange_from:"您输入的范围不合理。",nrange_to:"您输入的范围不合理。",n_useless_zero:'数字前面好像有多余的"0"。',d_format:'日期输入格式为"YYYY-MM-DD"。',d_upper:"日期太晚，最晚允许<strong>{$0}</strong>。",d_lower:"日期太早，最早允许<strong>{$0}</strong>。",daterange_from:"起始日期不能大于截止日期。",daterange_to:"截止日期不能小于起始日期。",daterange_larger_span:"时间跨度不得超过<strong>{$0}</strong>天。",text_longer:"字数太多，最多允许<strong>{$0}</strong>字。",text_shorter:"字数太少，最少允许<strong>{$0}</strong>字。",bytetext_longer:"字数太多，最多允许<strong>{$0}</strong>字节。",bytetext_shorter:"字数太少，最少允许<strong>{$0}</strong>字节。",richtext_longer:"字数太多，最多允许<strong>{$0}</strong>字。",richtext_shorter:"字数太少，最少允许<strong>{$0}</strong>字。",_reconfirm:"两次输入不一致。",_time:"请检查您输入的时间格式。",_minute:"请检查您输入的时间格式。",_email:"请检查您输入的Email格式。",_mobilecode:"请检查您输入的手机号码。",_phone:"请检查您输入的电话号码。",_phonewithext:"请检查您输入的电话号码。",_phonezone:"请检查您输入的电话区号。",_phonecode:"请检查您输入的电话号码。",_phoneext:"请检查您输入的电话分机号码。",_zipcode:"请检查您输入的邮政编码。",_idnumber:"请检查您输入的身份证号码，目前只支持15位或者18位。",_bankcard:"请检查您输入的银行账号。",_cnname:"请检查您输入的姓名。",_vcode:"请检查您输入的验证码。",_imgfile:"请检查您选择的图片文件路径，只支持jpg、jpeg、png、gif、tif、bmp格式。",_regexp:"请检查您的输入。",_magic:"请检查您的输入。",_req_text:"请填写{$0}。",_req_select:"请选择{$0}。",_req_file:"请上传{$0}。",_logicrequired:"{$0}输入不完整.",getMsg:function(X,Y){return K(X,Y)||K(X,"errmsg")||O[Y]||Y;}};var D=U.Utils={getCalendarImg:(function(){var X=null;return function(){return X=X||N('<img src="'+A.PATH+'components/valid/assets/Calendar.gif" align="absMiddle" class="calendar-hdl-img" style="cursor:pointer">');};})(),getDateFromPopup:function(Y){if(A.Calendar){A.Calendar.getDateFromPopup(Y);}else{var X=A.PATH+"components/valid/calendar.js?v={version}";T(X,function(){A.Calendar.getDateFromPopup(Y);});}},setTextValue:function(X,Y){if(X.createTextRange){X.createTextRange().text=Y;}else{X.value=Y;}},trimTextValue:function(Y){var X=R(Y.value);if(X!=Y.value){D.setTextValue(Y,X);}},dbc2sbcValue:function(Y){var X=J(E(Y));if(X!=E(Y)){D.setTextValue(Y,X);}},prepare4Vld:function(X){if(X.getAttribute("ignoredbc")){D.dbc2sbcValue(X);}if(X.type=="text"||X.type=="textarea"){D.trimTextValue(X);}}};var C=U.Validators={};L(C,[{required:function(X,e){D.prepare4Vld(X);var f=U._curReqAttr||U.REQ_ATTR;var d=K(X,f);if(d){var c=K(X,"reqlogic");if(c){return C.logicrequired(X,e,c);}else{var b=false;var Y="_req_text";if(X.tagName=="SELECT"){b=(X.value!=""||X.length<2||(X.length==2&&X.options[1].value==""));Y="_req_select";}else{if(X.type=="checkbox"||X.type=="radio"){var Z=document.getElementsByName(X.name);for(var a=0;a<Z.length;a++){if(b=Z[a].checked){break;}}Y="_req_select";}else{b=(E(X)!="");if(X.type=="file"){Y="_req_file";}}}if(e!=false){U.renderResult(X,b,!b&&d.indexOf(" ")==0?d.substr(1):I(O[Y],[d]));}return b;}}return true;},datatype:function(a,c,Z){Z=Z||K(a,"datatype");if(!Z){U.pass(a,c);return true;}var b=Z.split("-")[0].toLowerCase(),Y=Z.substr(b.length+1),X=C[b];if(!X){throw"Unknown datatype: "+Z;}return Y?X(a,c,Y):X(a,c);},n:function(Z,h,X){D.prepare4Vld(Z);D.dbc2sbcValue(Z);var b=E(Z);var e=(b=="");var a=null;if(!e){var g=(X||K(Z,"n-pattern")||"10").split(".");var f=g[0]|0||10,c=g[1]|0;if(c<1){if((/\D/).test(b)||b.length>f){a=I(O.getMsg(Z,"n_integer"),[1+new Array(f+1).join("0")]);}}else{var i="^\\d{1,"+(f-c)+"}(\\.\\d{1,"+c+"})?$";if(!(new RegExp(i)).test(b)){a=I(O.getMsg(Z,"n_format"),[(new Array(f-c+1)).join("X")+"."+(new Array(c+1)).join("X")]);}}if((/^0\d/).test(b)){a=O.getMsg(Z,"n_useless_zero");}if(!a){var Y=K(Z,"maxValue");if(Y&&(parseFloat(b,10)>Y-0)){a=I(O.getMsg(Z,"n_upper"),[Y,b]);}var d=K(Z,"minValue");if(d&&parseFloat(b,10)<d-0){a=I(O.getMsg(Z,"n_lower"),[d,b]);}}if(a){e=false;}else{e=true;}}if(h!=false){U.renderResult(Z,e,a);}return e;},nrange:function(Y,f,X){var c=C.n(Y,f,X);if(c){var a=F(K(Y,"fromNEl"));var Z=F(K(Y,"toNEl"));if(a){Z=Y;}else{if(Z){a=Y;}else{var b=Y.parentNode.getElementsByTagName("input");if(b[0]==Y){a=Y;Z=b[1];}else{a=b[0];Z=Y;}}}var d=Y==a?Z:a;var e=C.n(d,f,X);if(e){if(E(d)&&E(Y)){if(E(a)*1>E(Z)*1){c=false;if(Y==a){U.fail(a,O.getMsg(a,"nrange_from"));}if(Y==Z){U.fail(Z,O.getMsg(Z,"nrange_to"));}}}}}return c;},d:function(X,f){D.prepare4Vld(X);D.dbc2sbcValue(X);var a=E(X);var e=(a=="");var Z=null;if(!e){a=a.replace(/(^\D+)|(\D+$)/g,"").replace(/\D+/g,"/");if(!(/\D/).test(a)){if(a.length==8){a=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2);}}var b=new Date(a);if(!isNaN(b)){var c=a.split(/\D+/ig);if(c.length==3&&c[0].length==4&&c[2].length<3){e=true;if(M(b)!=E(X)){D.setTextValue(X,M(b));a=E(X);}}}if(!e){Z=O.getMsg(X,"d_format");}else{var Y=X.getAttribute("maxValue")||"2049-12-31";if(b>new Date(Y.replace(/\D+/g,"/"))){e=false;Z=I(O.getMsg(X,"d_upper"),[Y,a]);}var d=X.getAttribute("minValue")||"1900-01-01";if(b<new Date(d.replace(/\D+/g,"/"))){e=false;Z=I(O.getMsg(X,"d_lower"),[d,a]);}}}if(f!=false){U.renderResult(X,e,Z);}return e;},daterange:function(Y,f){var a=C.d(Y,f);if(a){var e=F(K(Y,"fromDateEl"));var d=F(K(Y,"toDateEl"));if(e){d=Y;}else{if(d){e=Y;}else{var Z=Y.parentNode.getElementsByTagName("input");if(Z[0]==Y){e=Y;d=Z[1];}else{e=Z[0];d=Y;}}}var b=Y==e?d:e;var c=C.d(b,f);if(c){if(E(b)&&E(Y)){if(E(e)>E(d)){a=false;if(Y==e){U.fail(e,O.getMsg(e,"daterange_from"));}if(Y==d){U.fail(d,O.getMsg(d,"daterange_to"));}}if(E(e)&&E(d)){var X=K(e,"maxDateSpan")||K(d,"maxDateSpan");if(X&&(new Date(E(d).replace(/-/g,"/"))-new Date(E(e).replace(/-/g,"/")))>(X-1)*24*3600000){U.fail(Y,I(O.getMsg(Y,"daterange_larger_span"),[X]));a=false;}}}}}return a;},_checkLength:function(X,f,g,e){D.prepare4Vld(X);var Z=E(X);var b=(Z=="");var Y=null;if(!b){var a=(K(X,"maxLength")||1024)*1;var c=(K(X,"minLength")||0)*1;var d=g(X);if(d>a){Y=I(O.getMsg(X,"text_longer")||O[e+"_longer"],[a,d]);}else{if(d<c){Y=I(O.getMsg(X,"text_shorter")||O[e+"_shorter"],[c,d]);}else{b=true;}}}if(f!=false){U.renderResult(X,b,Y);}return b;},text:function(X,Y){return C._checkLength(X||this,Y,function(Z){return E(Z).length;},"text");},bytetext:function(X,Y){return C._checkLength(X||this,Y,function(Z){return P(E(Z));},"text");},richtext:function(X,Y){return C._checkLength(X||this,Y,function(Z){var b=E(Z);if(Z.getAttribute("ignoreTag")){return b.replace(/<img[^>]*>/g,"a").replace(/<[^>]*>/g,"").length;}else{return b.length;}},"richtext");},idnumber:function(Z,d){D.prepare4Vld(Z);D.dbc2sbcValue(Z);var a=E(Z);var c=(a=="");if(!c){if((/^\d{15}$/).test(a)){c=true;}else{if((/^\d{17}[0-9xX]$/).test(a)){var e="1,0,x,9,8,7,6,5,4,3,2".split(",");var Y="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(",");var f=a.toLowerCase().split("");var X=0;for(var b=0;b<17;b++){X+=Y[b]*f[b];}c=(e[X%11]==f[17]);}}}if(d!=false){U.renderResult(Z,c,!c&&O.getMsg(Z,"_idnumber"));}return c;},cnname:function(Y,a){D.prepare4Vld(Y);var Z=E(Y);var X=(Z=="");if(!X){X=P(Z)<=32&&/^[\u4e00-\u9fa5a-zA-Z.\u3002\u2022]{2,32}$/.test(Z);}if(a!=false){U.renderResult(Y,X,!X&&O.getMsg(Y,"_cnname"));}return X;},reconfirm:function(Y,a){D.prepare4Vld(Y);var Z=F(Y.getAttribute("reconfirmFor"));var X=(E(Y)==E(Z));if(a!=false){U.renderResult(Y,X,!X&&O.getMsg(Y,"_reconfirm"));}return X;},imgfile:function(Z,b){var a=E(Z);var X=(a=="");if(!X){var Y=a.substring(a.lastIndexOf(".")+1);X=(/^(jpg|jpeg|png|gif|tif|bmp)$/i).test(Y);}if(b!=false){U.renderResult(Z,X,!X&&O.getMsg(Z,"_imgfile"));}return X;},reg:function(a,d,X,c,Z){if(Z){D.dbc2sbcValue(a);}D.prepare4Vld(a);var b=E(a);var Y=(b=="");if(!Y){c=c||"_regexp";X=X||K(a,"reg-pattern");if("string"==typeof X){X.replace(/^\/(.*)\/([ig]*)$/g,function(f,e,g){X=new RegExp(e,g||"");});}Y=X.test(b);}if(d!=false){U.renderResult(a,Y,!Y&&O.getMsg(a,c));}return Y;},magic:function(a,c,X){D.prepare4Vld(a);X=X||K(a,"magic-pattern");var Z=(E(a)==""||!X);if(!Z){var b={el:a,Validators:C};var Y=X.replace(/(\w+)/ig,'opts.Validators.datatype(opts.el,false,"$1")');Z=V(Y,b);}if(c!=false){U.renderResult(a,Z,!Z&&O.getMsg(a,"_magic"));}return Z;},uv:function(X,Y){if(X.onblur&&!X.onblur()){return false;}return true;},notempty:function(X){D.prepare4Vld(X);return !!E(X);},logicrequired:function(Z,e,b){Z=Z||this;b=b||K(Z,"reqlogic");var c=U._curReqAttr||U.REQATTR,d=K(Z,c),a={el:Z,Validators:C},Y=b.replace(/\$([\w-]+)/ig,'opts.Validators.notempty($("$1"))').replace(/this/ig,"opts.Validators.notempty(opts.el)");var X=V(Y,a);if(e!=false){U.renderResult(Z,X,!X&&d.indexOf(" ")==0?d.substr(1):I(O._logicrequired,[d]));}return !!X;}},{time:function(X,Y){return C.reg(X,Y,/^(([0-1]\d)|(2[0-3])):[0-5]\d:[0-5]\d$/,"_time",true);},minute:function(X,Y){return C.reg(X,Y,/^(([0-1]\d)|(2[0-3])):[0-5]\d$/,"_minute",true);},email:function(X,Y){return C.reg(X||this,Y,/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,"_email",true);},mobilecode:function(X,Y){return C.reg(X||this,Y,/^(13|15|18|14)\d{9}$/,"_mobilecode",true);},phone:function(X,Y){return C.reg(X||this,Y,/^0(10|2\d|[3-9]\d\d)[1-9]\d{6,7}$/,"_phone",true);},phonewithext:function(X,Y){return C.reg(X||this,Y,/^0(10|2\d|[3-9]\d\d)[1-9]\d{6,7}(-\d{1,7})?$/,"_phonewithext",true);},phonezone:function(X,Y){return C.reg(X||this,Y,/^0(10|2\d|[3-9]\d\d)$/,"_phonezone",true);},phonecode:function(X,Y){return C.reg(X||this,Y,/^[1-9]\d{6,7}$/,"_phonecode",true);},phoneext:function(X,Y){return C.reg(X||this,Y,/^\d{1,6}$/,"_phoneext",true);},zipcode:function(X,Y){return C.reg(X||this,Y,/^\d{6}$/,"_zipcode",true);},vcode:function(X,Y){return C.reg(X||this,Y,/^\w{4}$/,"_vcode",true);}}]);A.provide("Valid",U);})();(function(){var L=BB.Valid,B=L.Validators,H=L.Utils,J=BB.NodeH,F=J.$,D=function(P,O){return P.getAttribute(O);},A=J.addClass,M=J.removeClass,I=J.replaceClass,K=J.show,G=J.hide,E=J.getValue,C=function(O,R){var R=R||{},Q=document.createElement(O);for(var P in R){Q[P]=R[P];}return Q;};L._getHintEl=function(P){var O=D(P,"hintEl");return O&&F(O);};L._getEmptyHintEl=function(P){var O=D(P,"emptyHintEl");return O&&F(O);};L._getEmEl=function(R){var Q=D(R,"emEl");if(Q){return F(Q);}var S=[R,R.parentNode];for(var P=0;P<2;P++){var T=S[P];for(var O=0;O<5;O++){T=T.nextSibling;if(!T){break;}if(T.tagName=="EM"){return T;}}}return null;};L._getErrEmEl=function(Q,O){var P=Q.nextSibling;if(P){if(P.tagName=="EM"||!P.tagName&&(P=P.nextSibling)&&P.tagName=="EM"){return P;}}if(!O){return null;}P=C("em",{className:"error"});Q.parentNode.insertBefore(P,Q.nextSibling);return P;};L.onhint=function(R){var Q=R.target;if(!Q||!Q.type||"text,hidden,password,textarea,checkbox,radio,select-one,select-multiple".indexOf(Q.type)==-1){return ;}var P=L._getHintEl(Q),O=L._getEmptyHintEl(Q);P&&I(P,"dark-hint","hint");if(O){clearTimeout(Q.__placeholderTimer||0);A(O,"dark-emptyhint");}if(!B.required(Q,false)&&!E(Q)){return ;}if(!B.datatype(Q,false)){B.datatype(Q,true);}};L.onblur=function(S){var Q=S.target;if(!Q||!Q.type||"text,hidden,password,textarea,checkbox,radio,select-one,select-multiple".indexOf(Q.type)==-1){return ;}var P=L._getHintEl(Q),O=L._getEmptyHintEl(Q);P&&I(P,"hint","dark-hint");B.datatype(Q,true);if(O){clearTimeout(Q.__placeholderTimer||0);function R(){if(E(Q)){A(O,"dark-emptyhint");}else{M(O,"dark-emptyhint");}}R();Q.__placeholderTimer=setTimeout(R,600);}};L.onpass=function(R){var Q=R.target,O=L._getEmEl(Q);M(Q,"error");if(O){if((O.__vld_fail_stamp|0)!=L.checkAll_stamp){K(O);var P=L._getErrEmEl(O);P&&G(P);}}};L.onfail=function(S){var R=S.target,P=S.errMsg;A(R,"error");R.__vld_errMsg=P;var Q=L._getEmEl(R);if(Q){if((Q.__vld_fail_stamp|0)!=L.checkAll_stamp){G(Q);var O=L._getErrEmEl(Q,true);O.innerHTML=P;K(O);}if(L.isChecking){Q.__vld_fail_stamp=L.checkAll_stamp;}}};var N=10000;L.oninitall=function(O){setTimeout(function(){W("input,textarea",O.target).forEach(function(S){var T=S.getAttribute("data-placeholder"),P=L._getEmptyHintEl(S),Q=document.createElement("input");if(!("placeholder" in Q)||!S.getAttribute("placeholder")){if(T&&!P){var R="emptyhint-"+N++;P=C("span",{id:R,innerHTML:T,className:"emptyhint"});P.onclick=function(){try{S.focus();}catch(U){}};S.parentNode.insertBefore(P,S);S.setAttribute("emptyhintel",R);}if(P){if((E(S)||"").trim()){A(P,"dark-emptyhint");}else{M(P,"dark-emptyhint");}}}});},10);};L.bindPhoneEls=function(U){var O=["phonezone","phonecode","phoneext","mobilecode"],T=[4,8,4,11],S=[" 请输入电话区号。"," 请输入电话号码。",""," 电话号码与手机至少填写一项。"],P=U.reqMsgs||S,R=U.ids;for(var Q=0;Q<R.length;Q++){$$(R[Q]).attr("reqMsg",P[Q]||S[Q]).attr("dataType",O[Q]).set("maxLength",T[Q]);}F(R[0]).setAttribute("reqlogic","(!$"+R[1]+" && !$"+R[2]+") || $"+R[0]);F(R[1]).setAttribute("reqlogic","(!$"+R[0]+" && !$"+R[2]+") || $"+R[1]);if(R.length==4){F(R[3]).setAttribute("reqlogic","$"+R[0]+" || $"+R[1]+"|| $"+R[2]+"|| $"+R[3]);}};BB.DomU.ready(function(){L.initAll();});})();pmc_exec_time_6824=new Date()*1-pmc_in_script_time_6824;
