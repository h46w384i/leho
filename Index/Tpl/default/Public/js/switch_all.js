pmc_in_script_time_6771=new Date()*1;void function(){var F=BB.ObjectH,B=BB.ClassH,M=BB.CustEvent,H=BB.EventTargetH,L=BB.EventH,G=BB.DomU,J=BB.NodeH;var I=function(){this.list=[];this.index=-1;this.initialize.apply(this,arguments);};I.EVENTS={beforeswitch:"beforeswitch",afterswitch:"afterswitch",beforerepeatswitch:"beforerepeatswitch",afterrepeatswitch:"afterrepeatswitch"};F.mix(I.prototype,function(){return{initialize:function(N){var C=[];for(var E in I.EVENTS){C.push(I.EVENTS[E]);}M.createEvents(this,C);F.mix(this,N||{},true);},insert:function(E,C){C=Math.max(Math.min(this.list.length),0);if(C<this.index){++this.index;}this.list.splice(C,0,E);return E;},remove:function(C){if(!this.list.length){return null;}C=Math.max(Math.min(this.list.length-1),0);var E=this.list[this.index];if(C<this.index){--this.index;}else{if(C==this.index){this.index=-1;}}this.list.splice(C,1);return E;},switchTo:function(C){if(!(this.list.length&&C<this.list.length)){return ;}this.index=C;},indexOf:function(N){for(var E=0,C=this.list.length;E<C;++E){if(this.list[E]==N){return E;}}return -1;},item:function(C){if(this.list.length==0||C<0){return null;}return this.list[C%this.list.length]||null;},getCurrent:function(){return this.item(this.index);},getLast:function(){return this.item(this.list.length-1);},getFirst:function(){return this.item(0);},_dispatch:function(E,O,N){var C=new M(this,E);F.mix(C,{from:this.item(O),to:this.item(N)});return this.fire(C);},dispatchBeforeSwitch:function(E,C){return this._dispatch(I.EVENTS.beforeswitch,E,C);},dispatchAfterSwitch:function(E,C){return this._dispatch(I.EVENTS.afterswitch,E,C);},dispatchBeforeRepeatSwitch:function(E,C){return this._dispatch(I.EVENTS.beforerepeatswitch,E,C);},dispatchAfterRepeatSwitch:function(E,C){return this._dispatch(I.EVENTS.afterrepeatswitch,E,C);}};}());var K=function(){this.nav=null;this.content=null;this.disabled=false;this.events=[];this.immediateEvents=[];this.handlers={};this.initialize.apply(this,arguments);};F.mix(K.prototype,function(){return{initialize:function(C){F.mix(this,C,true);}};}());K.parse=function(C){return C.nav&&new this(C)||null;};var D=B.extend(function(){this.events=["click"];this.immediateEvents=[];this.behavior=null;this.host=null;this.nav=null;this.content=null;this.selector={nav:null,content:null};this.className={host:null,nav:null,content:null,navItemSelected:null,navItemUnSelected:null,contentItemSelected:null,contentItemUnSelected:null};this.preventDefault=true;this.stopPropagation=false;this.delayTime=0;this.step=1;this.interval=3000;this.autoPlay=false;this._handlers={preventdefault:null,mouseenter:null,mouseleave:null};this._playTimer=null;this._delayTimer=null;this._playing=false;this._super=arguments.callee.$super;this._proto=this._super.prototype;this._super.apply(this,arguments);},I,false);D.EVENTS={afterrender:"afterrender",afterdispose:"afterdispose"};F.mix(D.prototype,function(){return{initialize:function(P,O){var C=this;var E=[];for(var N in D.EVENTS){E.push(D.EVENTS[N]);}M.createEvents(this,E);this._handlers.preventdefault=function(Q){L.preventDefault(Q);};this._handlers.mouseenter=function(Q){C.pause();};this._handlers.mouseleave=function(Q){C.resume();};this._proto.initialize.call(this,O);this.host=P;this.nav=this.nav||G.query("."+this.className.nav,this.host)[0],this.content=this.content||G.query("."+this.className.content,this.host)[0];H.on(this.host,"mouseenter",this._handlers.mouseenter);H.on(this.host,"mouseleave",this._handlers.mouseleave);},render:function(P){F.mix(this,P||{},true);var Q=G.query(this.selector.nav,this.nav),N=G.query(this.selector.content,this.content),E=Q.length,O=0,C=null;for(;O<E;++O){this.add({nav:Q[O],content:N[O]||null});if(J.hasClass(Q[O],this.className.navItemSelected)){C=O;}}this.fire(D.EVENTS.afterrender);if(C!=null){this.to(C);}if(this.autoPlay){this.play();}},dispose:function(){H.un(this.host,"mouseenter",this._handlers.mouseenter);H.un(this.host,"mouseleave",this._handlers.mouseleave);if(this.autoPlay){this.stop();}while(this.list.length){this.remove(this.list.length-1);}this.fire(D.EVENTS.afterdispose);},insert:function(E,C){if(!(E=K.parse(E))){return null;}this._proto.insert.apply(this,arguments);this._addListener(E);return E;},add:function(C){return this.insert(C,this.list.length);},remove:function(C){var E=this._proto.remove.apply(this,arguments);if(!E){return null;}this._unListener(E);return E;},_addListener:function(P){var C=this,N=P.events.length?P.events:this.events;if(this.preventDefault){H.on(P.nav,"click",this._handlers.preventdefault);}for(var E=N.length,O=0;O<E;++O){void function(Q){H.on(P.nav,Q,P.handlers[Q]=function(R){if(C.preventdefault){L.preventdefault(R);}if(C.stopPropagation){L.stopPropagation(R);}if(C.delayTime){if(C._delayTimer){clearTimeout(C._delayTimer);}C._delayTimer=setTimeout(function(){C._delayTimer=null;C.to(C.indexOf(P),Q);},C.delayTime);}else{C.to(C.indexOf(P),Q);}});}(N[O]);}N=P.immediateEvents.length?P.immediateEvents:this.immediateEvents;for(var E=N.length,O=0;O<E;++O){void function(Q){H.on(P.nav,Q,P.handlers[Q]=function(R){if(C.preventdefault){L.preventdefault(R);}if(C.stopPropagation){L.stopPropagation(R);}if(C.delayTime&&C._delayTimer){clearTimeout(C._delayTimer);C._delayTimer=null;}C.to(C.indexOf(P),Q);});}(N[O]);}},_unListener:function(N){var C=this.events.length,E=0;if(this.preventDefault){H.un(N.nav,"click",this._handlers.preventdefault);}for(var C=events.length,E=0;E<C;++E){H.on(N.nav,events[E],N.handlers[events[E]]);}events=N.immediateEvents.length?N.immediateEvents:this.immediateEvents;for(var C=events.length,E=0;E<C;++E){H.on(N.nav,events[E],N.handlers[events[E]]);}},to:function(C,E){if(!(this.list.length&&C<this.list.length)){return ;}return this.behavior.trigger({type:E||"call",context:this,index:C});},prev:function(C){this.to((this.list.length+this.index-this.step)%this.list.length,C);},next:function(C){this.to((this.list.length+this.index+this.step)%this.list.length,C);},play:function(){this._playing=true;this.resume();},stop:function(){this.pause();this._playing=false;},resume:function(){if(!this._playing||this._playTimer){return ;}var C=this;this._playTimer=setInterval(function(){C.next("autoplay");},this.interval);},pause:function(){if(!this._playing||!this._playTimer){return ;}clearInterval(this._playTimer);this._playTimer=null;},reset:function(){if(this._delayTimer){clearTimeout(this._delayTimer);}this.behavior.reset(this);},setClass:function(N,P){var Q=this.item(N),O,E,C;if(P=="content"){O=this.className.contentItemSelected,E=this.className.contentItemUnSelected,C="content";}else{O=this.className.navItemSelected,E=this.className.navItemUnSelected,C="nav";}if(Q[C]){J.replaceClass(Q[C],E,O);}},clearClass:function(Q){var E=this.list.length,O=0,P,N,C;if(Q=="content"){P=this.className.contentItemSelected,N=this.className.contentItemUnSelected,C="content";}else{P=this.className.navItemSelected,N=this.className.navItemUnSelected,C="nav";}for(;O<E;++O){if(this.list[O][C]){J.replaceClass(this.list[O][C],P,N);}}},before:function(E,C){this.on("before"+E,C);},after:function(E,C){this.on("after"+E,C);}};}(),true);var A={};BB.provide("Switch",{Switch:I,ElementSwitchItemEntity:K,ElementSwitch:D,SwitchBehavior:A});}();void function(){var B=BB.ObjectH,A=BB.Switch;A.SwitchBehavior.Tabs=function(){this.initialize.apply(this,arguments);};B.mix(A.SwitchBehavior.Tabs.prototype,function(){return{initialize:function(C){B.mix(this,C||{},true);},_change:function(C,E,D){if(!C.dispatchBeforeSwitch(E,D)){return ;}C.clearClass("nav");C.setClass(D,"nav");C.clearClass("content");C.setClass(D,"content");C.switchTo(D);C.dispatchAfterSwitch(E,D);},_repeat:function(C,E,D){if(!C.dispatchBeforeRepeatSwitch(E,D)){return ;}C.clearClass("nav");C.setClass(D,"nav");C.clearClass("content");C.setClass(D,"content");C.switchTo(D);C.dispatchAfterRepeatSwitch(E,D);},trigger:function(D){var C=D.context,F=C.index,E=D.index;if(F==E){this._repeat(C,F,E);}else{this._change(C,F,E);}},reset:function(C){C.clearClass("nav");C.clearClass("content");C.switchTo(-1);}};}());A.TabView=function(D,C){C=B.mix(B.mix({},C||{}),{selector:A.TabView.Config.TABS_SELECTOR,className:A.TabView.Config.TABS_CLASS_NAME});C.behavior=new A.SwitchBehavior.Tabs;return new A.ElementSwitch(D,C);};A.TabView.Config={TABS_SELECTOR:{nav:">*",content:">*"},TABS_CLASS_NAME:{host:"switch-tabs",nav:"switch-nav",content:"switch-content",navItemSelected:"selected",navItemUnSelected:"unselected",contentItemSelected:"selected",contentItemUnSelected:"unselected"}};}();void function(){var F=BB.ObjectH,E=BB.NodeH,B=BB.Anim,D=BB.ScrollAnim,C=BB.Switch;C.SwitchBehavior.Fade=function(){this.easing=null;this.animInterval=500;this._cache={from:null};this.initialize.apply(this,arguments);};F.mix(C.SwitchBehavior.Fade.prototype,function(){return{initialize:function(A){F.mix(this,A||{},true);},_play:function(J,G){var A=this._cache,I=A.from,H=null;if(I==J){G();return ;}if(I){if(I.__fadeAnim&&I.__fadeAnim.isPlay()){I.__fadeAnim.pause();H=1-I.__fadeAnim.step();I.__fadeAnim.stop();}E.setStyle(I.content,{zIndex:9});I.__fadeAnim=new B(I.content,{opacity:{from:1,to:0}},this.animInterval,this.easing);I.__fadeAnim.on("suspend",function(){E.setStyle(I.content,{zIndex:0});});I.__fadeAnim.on("suspend",function(){E.setStyle(I.content,{zIndex:0});});I.__fadeAnim.play();if(H!=null){I.__fadeAnim.step(H);}}A.from=J;H=null;if(J.__fadeAnim&&J.__fadeAnim.isPlay()){J.__fadeAnim.pause();H=1-J.__fadeAnim.step();J.__fadeAnim.stop();}E.setStyle(J.content,{zIndex:0});J.__fadeAnim=new B(J.content,{opacity:{from:0,to:1}},this.animInterval,this.easing);J.__fadeAnim.on("suspend",function(){E.setStyle(J.content,{zIndex:9});G();});J.__fadeAnim.play();if(H!=null){J.__fadeAnim.step(H);}},_change:function(A,H,G){if(!A.dispatchBeforeSwitch(H,G)){return ;}A.clearClass("nav");A.setClass(G,"nav");this._play(A.item(G),function(){A.clearClass("content");A.setClass(G,"content");A.switchTo(G);A.dispatchAfterSwitch(H,G);});},_repeat:function(A,H,G){if(!A.dispatchBeforeRepeatSwitch(H,G)){return ;}A.clearClass("nav");A.setClass(G,"nav");this._play(A.item(G),function(){A.clearClass("content");A.setClass(G,"content");A.switchTo(G);A.dispatchAfterRepeatSwitch(H,G);});},trigger:function(G){var A=G.context,I=A.index,H=G.index;if(I==H){this._repeat(A,I,H);}else{this._change(A,I,H);}},reset:function(G){var A=this._cache;if(A.from){if(A.from.__fadeAnim&&A.from.__fadeAnim.isPlay()){A.from.__fadeAnim.stop();}E.setStyle(A.from.content,{opacity:0});A.from=null;}G.clearClass("nav");G.clearClass("content");G.switchTo(-1);}};}());C.SwitchBehavior.Scroll=function(){this.config={top:"scrollTop",left:"scrollLeft"};this.direction="top";this.easing=null;this.animInterval=500;this._cache={from:null,anim:null};this.initialize.apply(this,arguments);};F.mix(C.SwitchBehavior.Scroll.prototype,function(){return{initialize:function(A){F.mix(this,A||{},true);},_play:function(H,K,J,G){var A=this._cache,I={};I[this.config[this.direction]]={to:E.getSize(K.content).height*H};if(A.anim&&A.anim.isPlay()){A.anim.stop();}A.anim=new D(J,I,this.animInterval,this.easing);A.anim.on("suspend",function(){G();});A.anim.play();},_change:function(A,H,G){if(!A.dispatchBeforeSwitch(H,G)){return ;}A.clearClass("nav");A.setClass(G,"nav");this._play(G,A.item(G),A.content,function(){A.clearClass("content");A.setClass(G,"content");A.switchTo(G);A.dispatchAfterSwitch(H,G);});},_repeat:function(A,H,G){if(!A.dispatchBeforeRepeatSwitch(H,G)){return ;}A.clearClass("nav");A.setClass(G,"nav");this._play(G,A.item(G),A.content,function(){A.clearClass("content");A.setClass(G,"content");A.switchTo(G);A.dispatchAfterRepeatSwitch(H,G);});},trigger:function(G){var A=G.context,I=A.index,H=G.index;if(I==H){this._repeat(A,I,H);}else{this._change(A,I,H);}},reset:function(G){var A=this._cache;if(A.from){if(A.anim&&A.anim.isPlay()){A.anim.stop();}A.from=A.anim=null;}G.content[this.config[this.direction]]=0;G.clearClass("nav");G.clearClass("content");G.switchTo(-1);}};}());C.Slide=function(G,A){A=F.mix(F.mix({},A||{}),{autoPlay:true});if(A.effect=="scroll"){A.behavior=new C.SwitchBehavior.Scroll(A);A=F.mix(A,{selector:C.Slide.Config.SCROLL_SELECTOR,className:C.Slide.Config.SCROLL_CLASS_NAME});}else{A.behavior=new C.SwitchBehavior.Fade(A);A=F.mix(A,{selector:C.Slide.Config.FADE_SELECTOR,className:C.Slide.Config.FADE_CLASS_NAME});}return new C.ElementSwitch(G,A);};C.Slide.Config={FADE_SELECTOR:{nav:">*",content:">*"},FADE_CLASS_NAME:{host:"switch-fade",nav:"switch-nav",content:"switch-content",navItemSelected:"selected",navItemUnSelected:"unselected",contentItemSelected:"selected",contentItemUnSelected:"unselected"},SCROLL_SELECTOR:{nav:">*",content:">*"},SCROLL_CLASS_NAME:{host:"switch-scroll",nav:"switch-nav",content:"switch-content",navItemSelected:"selected",navItemUnSelected:"unselected",contentItemSelected:"selected",contentItemUnSelected:"unselected"}};}();void function(){var D=BB.ObjectH,H=BB.NodeH,A=BB.NodeW,J=BB.CustEvent,G=BB.EventTargetH,I=BB.EventH,F=BB.DomU,C=BB.Switch,B=BB.ScrollAnim;C.Scroll=function(){this._switch=null;this.panel=null;this.prev=null;this.next=null;this.vertical=false;this.autoWidth=true;this.preventDefault=true;this.easing=null;this.interval=200;this.events={"in":"mousedown",out:"mouseup"};this.className={scroll:"switch-scroll",scrolled:"switch-scrolled",active:"switch-scroll-active",panel:"switch-scroll-panel",prev:"switch-scroll-prev",next:"switch-scroll-next"};this._handlers={render:null,dispose:null,_switch:null,prev:null,next:null,previn:null,prevout:null,nextin:null,nextout:null};this._anim=null;this._timer=null;this.initialize.apply(this,arguments);return this._switch;};D.mix(C.Scroll.prototype,function(){return{initialize:function(K,E){this._switch=K;this._switch.scroll=this;D.mix(this,E||{},true);this._addListener();},dispose:function(){this._unListener();this._unTriggerHandler();delete this._switch.scroll;},render:function(E){E=E||{};this.panel=E.panel||H.ancestorNode(this._switch.nav,"."+this.className.panel);this.prev=E.prev||F.query("."+this.className.prev,this._switch.host)[0];this.next=E.next||F.query("."+this.className.next,this._switch.host)[0];this._addTriggerHandler();this._autoWidth();this.refresh();},_autoWidth:function(){if(!this.vertical&&this.autoWidth){var O,M=this._switch.list,E=M.length,N=0,L=0,K=0;for(;K<E;++K){O=M[K].nav;N=A.marginWidth(O);L+=O.offsetWidth+N[1]+N[3];}H.setInnerSize(this._switch.nav,L);}},_addListener:function(){var E=this;this._switch.after("render",this._handlers.render=function(){E.render();});this._switch.after("dispose",this._handlers.dispose=function(){E.dispose();});this._switch.after("switch",this._handlers._switch=function(K){E.move(K.to.nav);});},_unListener:function(){this._switch.un("afterrender",this._handlers.render);this._switch.un("afterdispose",this._handlers.dispose);this._switch.un("afterswitch",this._handlers._switch);},_addTriggerHandler:function(){var E=this;G.on(this.prev,"click",this._handlers.prev=function(K){if(E.preventDefault){I.preventDefault(K);}});G.on(this.next,"click",this._handlers.next=function(K){if(E.preventDefault){I.preventDefault(K);}});G.on(this.prev,this.events["in"],this._handlers.previn=function(K){E.intoView(-1);if(E._timer){clearInterval(E._timer);}E._timer=setInterval(function(){E.intoView(-1);},E.interval+100);});G.on(this.prev,this.events.out,this._handlers.prevout=function(K){if(E._timer){clearInterval(E._timer);E._timer=null;}});G.on(this.next,this.events["in"],this._handlers.nextin=function(K){E.intoView(1);if(E._timer){clearInterval(E._timer);}E._timer=setInterval(function(){E.intoView(1);},E.interval+100);});G.on(this.next,this.events.out,this._handlers.nextout=function(K){if(E._timer){clearInterval(E._timer);E._timer=null;}});},_unTriggerHandler:function(){G.un(this.prev,"click",this._handlers.prev);G.un(this.next,"click",this._handlers.next);G.un(this.prev,this.events["in"],this._handlers.previn);G.un(this.next,this.events.out,this._handlers.nextin);G.un(this.prev,this.events["in"],this._handlers.prevout);G.un(this.next,this.events.out,this._handlers.nextout);},intoView:function(O){if(this._switch.index==-1){return ;}var M=H.getRect(this.panel),L=null,K=0,E=this._switch.list.length,N;for(;K<E;++K){N=H.getRect(this._switch.list[K].nav);if(this.vertical){if(M.top<=N.top&&M.top+M.height>=N.top+N.height){break;}}else{if(M.left<=N.left&&M.left+M.width>=N.left+N.width){break;}}}for(;K<E&&K>=0;K+=O){N=H.getRect(this._switch.list[K].nav);if(this.vertical){if(M.top>N.top||M.top+M.height<N.top+N.height){L=this._switch.list[K].nav;break;}}else{if(M.left>N.left||M.left+M.width<N.left+N.width){L=this._switch.list[K].nav;break;}}}if(L){this.move(L);}},moveTo:function(M){var E=this,L=null;if(this._anim&&this._anim.isPlay()){this._anim.pause();L=1-this._anim.step();this._anim.stop();}var K={};if(this.vertical){K.scrollTop={to:M};}else{K.scrollLeft={to:M};}this._anim=new B(this.panel,K,this.interval,this.easing);this._anim.on("suspend",function(){E.refresh();});this._anim.play();if(L!=null){this._anim.step(L);}},move:function(K){var E=H.getRect(this.panel),M=H.getRect(K);M.top+=this.panel.scrollTop;var L;if(this.vertical){if(E.top>M.top){L=this.panel.scrollTop+M.top-E.top;}else{if(E.top+E.height<M.top+M.height){L=this.panel.scrollTop+M.top+M.height-E.top-E.height;}}}else{if(E.left>M.left){L=this.panel.scrollLeft+M.left-E.left;}else{if(E.left+E.width<M.left+M.width){L=this.panel.scrollLeft+M.left+M.width-E.left-E.width;}}}this.moveTo(L);},refresh:function(){var O=this._switch.list;if(O.length==0){return ;}var N=H.getRect(this.panel),K=H.getRect(O[0].nav).left,L=H.getRect(O[O.length-1].nav).right,E=H.getRect(O[0].nav).top,M=H.getRect(O[O.length-1].nav).bottom;if(this.vertical){if(this._switch.nav.offsetHeight>this.panel.offsetHeight){H.addClass(this.panel,this.className.active);if(N.top<=E){H.replaceClass(this.prev,this.className.scroll,this.className.scrolled);}else{H.replaceClass(this.prev,this.className.scrolled,this.className.scroll);}if(N.bottom>=M){H.replaceClass(this.next,this.className.scroll,this.className.scrolled);}else{H.replaceClass(this.next,this.className.scrolled,this.className.scroll);}}}else{if(this._switch.nav.offsetWidth>this.panel.offsetWidth){H.addClass(this.panel,this.className.active);if(N.left<=K){H.replaceClass(this.prev,this.className.scroll,this.className.scrolled);}else{H.replaceClass(this.prev,this.className.scrolled,this.className.scroll);}if(N.right>=L){H.replaceClass(this.next,this.className.scroll,this.className.scrolled);}else{H.replaceClass(this.next,this.className.scrolled,this.className.scroll);}}}}};}(),true);}();pmc_exec_time_6771=new Date()*1-pmc_in_script_time_6771;
